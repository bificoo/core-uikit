'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var nativeRequestAnimationFrame = require('./nativeRequestAnimationFrame.js');
var emptyFunction = require('../utils/emptyFunction.js');
var getGlobal = require('../getGlobal.js');

var g = getGlobal['default']();
var lastTime = 0;

function _setTimeout(callback) {
  var currTime = Date.now();
  var timeDelay = Math.max(0, 16 - (currTime - lastTime));
  lastTime = currTime + timeDelay;
  return g.setTimeout(function () {
    callback(Date.now());
  }, timeDelay);
}
/**
 * Here is the native and polyfill version of requestAnimationFrame.
 * Please don't use it directly and use requestAnimationFrame module instead.
 */


var requestAnimationFrame = nativeRequestAnimationFrame['default'] && nativeRequestAnimationFrame['default'].bind(g) || _setTimeout; // Works around a rare bug in Safari 6 where the first request is never invoked.


requestAnimationFrame(emptyFunction['default']);

exports['default'] = requestAnimationFrame;
